---
import { Image } from 'astro:assets';
import feature1 from '../../assets/images/feature-1.png';
import feature2 from '../../assets/images/feature-2.png';
import feature3 from '../../assets/images/feature-3.png';

// Features.astro

type Feature = {
  tag: string;
  title: string;
  description: string;
  video?: string;
  image?: ImageMetadata;
  ctaText: string;
  ctaLink: string;
  ctaNote?: string;
};

const features: Feature[] = [
  {
    tag: 'ACTUALIZACIONES DE RENTA',
    title: 'No te vuelvas a olvidar una actualización de renta',
    description: `
      Sube tu contrato de arrendamiento o introduce los datos manualmente.
      AutoIPC calculará la fecha y el importe exacto de la actualización de renta acorde con la normativa vigente 
      <span class="bg-blue-50 rounded-md p-1 font-semibold">(IPC, IRAV o % fijo)</span>.
      <br /><br />
      Llegada la fecha de la actualización, AutoIPC mandará la comunicación a tu inquilino y te facilitará un certificado de envío.
      <br /><br />
      <span class="font-semibold">Ahorra tiempo en la gestión de tu piso de alquiler o en tu cartera inmobiliaria.</span>
    `,
    ctaText: 'Automatiza tus actualizaciones de renta',
    ctaLink: '#hero',
    image: feature1,
  },
  {
    tag: 'CONTRATOS DE ALQUILER',
    title: 'Genera contratos de arrendamiento en segundos',
    description: `
      Con tus inmuebles en AutoIPC, simplemente <span class="font-semibold">introduce los datos de los nuevos inquilinos</span>, selecciona un par de ajustes y AutoIPC <span class="font-semibold">generará el contrato de arrendamiento en segundos</span>.
      <br/><br/>
      <span class="font-semibold">Edita el contrato generado manualmente</span> o decide si quieres que AutoIPC lo envíe directamente al inquilino para su firma.
      <br/<br/>
      AutoIPC puede <span class="font-semibold">gestionar el proceso de firma por tí</span>, generando un certificado con valided legal. Sin tener que preocuparte por agendar reuniones con los inquilinos.
    `,
    ctaText: 'Empieza a generar contratos hoy mismo',
    ctaLink: '#hero',
    image: feature2,
  },
  {
    tag: 'ESTADÍSTICAS DE INMUEBLES',
    title: 'Analiza la rentabilidad de tus inmuebles en segundos',
    description: `
      En AutoIPC, puedes ver la rentabilidad de tus inmuebles de un vistazo con nuestros gráficos y estadísticas.
      <br/><br/>
      Extrae los datos a excel para poder analizarlos en profundidad o poder mandárselos a tu gestor.
      <br/><br/>
      AutoIPC también es capaz de analizar el mercado de alquiler de tu zona y te ofrecerá recomendaciones sobre el precio de alquiler de tus inmuebles.
    `,
    ctaText: 'Analiza la rentabilidad de tus inmuebles',
    ctaLink: '#hero',
    image: feature3,
  },
];
---

<section class="max-w-7xl mx-auto py-16 px-4 sm:px-6 lg:px-8">
  <!-- Main section title -->
  <div class="text-center mb-16">
    <h2 class="text-5xl font-semibold text-gray-900">
      Funcionalidades para que <br /><span class="text-primary font-medium">duermas tranquil@</span>
    </h2>
  </div>

  <!-- Features -->
  <div class="space-y-24">
    {
      features.map((feature, index) => (
        <div
          id={`feature-${index}`}
          class={`flex flex-col ${index % 2 === 1 ? 'lg:flex-row-reverse' : 'lg:flex-row'} gap-8 items-center scroll-mt-24`}
        >
          <div class="lg:w-1/2 space-y-4">
            <p class="text-sm font-semibold text-gray-500 tracking-wider uppercase">{feature.tag}</p>
            <h3 class="text-4xl text-gray-900">{feature.title}</h3>
            <div class="text-lg text-gray-600" set:html={feature.description} />

            <div class="pt-4">
              <a href={feature.ctaLink} class="cta-secondary font-semibold">
                {feature.ctaText}
              </a>
              {feature.ctaNote && <p class="text-sm text-gray-500 mt-4 ml-4">{feature.ctaNote}</p>}
            </div>
          </div>

          <div class="lg:w-1/2 rounded-lg overflow-hidden shadow-lg">
            {feature.video && (
              <video autoplay loop muted playsinline class="w-full">
                <source src={feature.video} type="video/mp4" />
                Your browser does not support the video tag.
              </video>
            )}
            {feature.image && <Image src={feature.image} alt={feature.title} class="w-full" width={800} height={600} />}
          </div>
        </div>
      ))
    }
  </div>
</section>
